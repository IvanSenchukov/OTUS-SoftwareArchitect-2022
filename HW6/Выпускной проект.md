# 0. Постановка задачи

## [Проверь свою работу](http://nealford.com/katas/kata?id=CheckYourWork "Check Your Work")

Университет значительно расширил свой курс по Компьютерным наукам и хочет иметь возможность автоматизировать процесс простановки оценок для простых задач по программированию.

- Количество пользователей - 300+ студентов в год, преподаватели, администратор

Требования:
- У студентов должна быть возможность загружать исходные коды своих решений в систему для их запуска, проверки и оценки.
- Оценки и запуски должны быть сохранены и доступны для аудита.
- Применяемая система антиплагиата должна включать в себя сравнение с решениями других студентов, а также отправку решений на проверку в сервис (TurnItIn)
- Система должна быть интегрирована с текущей Системой Управления Учебный Процессом университета (Learning Management System, LMS).
- Преподаватели устанавливают конечную дату приёма решений на проверку, после которой все загруженные решения отклоняются.
- Студенты имеют возможность загружать столько решений, сколько им нужно для улучшения своих оценок.
- Преподаватели определяют критерии оценки, которые могут включать в себя метрики и/или тесты.

Дополнительный контекст:
- LMS система университета основана на мэйнфрейме. Внесение изменений в неё очень затратно.
- Оценки проверяются каждый год государственным регулирующим органом.
- У университета есть очень маленький бюджет на IT, поскольку в настоящий момент происходит постройка дополнительного стадиона для игр в мяч.
- Университет считается передовым с точки зрения компьютерных наук.


# 1. Бизнес-цели и бизнес-драйверы
- Бизнес-цели
    - Реализация Системы проверки простых заданий по программированию для разных языков программирования;
    - Реализация хранения всех версий решений, предложенных студентами, для аудита;
    - Реализация интеграции системы проверки заданий по программированию с системой проверки антиплагиата;
    - Реализация интеграции системы проверки заданий по программированию с Системой Управления Учебным процессом
- Бизнес-драйверы
    - Ограниченный бюджет
    - Стремление к сохранению и поддержанию репутации университета в качестве передового по ИТ
    - Безопасность
        - сохранение данных о студентах
        - Минимизация риска попадания задач по программированию и решений в общий доступ.


# 2. Стейкхолдеры и их потребности
- Руководство университета
    - Снять заботы по рутинной проверке простых заданий по программированию с преподавателей;
    - Возможность использовать баллы, выставленные студенту Системой в Системе Управления Учебным Процессом
    - Возможность предоставить Государственному Регулирующему Органу необходимую для аудита информацию.
    - Сохранение и поддержание репутации Университета
    - Сохранение ноу-хау в вопросах формирования заданий для студентов
- Преподаватели
    - Возможность автоматической проверки задач по программированию;
    - Возможность назначить задачу студенту / группе студентов;
    - Возможность указания критериев оценки;
    - Возможность установить конечную дату;
    - Возможность проследить прогресс студента с помощью проведения аудита его решений;
    - Возможность проверить решение студента на плагиат;
- Студенты
    - Возможность загрузить своё решение в Систему Проверки;
    - После успешной сдачи задания - автоматическая простановка баллов в Системе Управления Учебным Процессом;
    - Возможность повторной сдачи задания для повышения своего балла;
    - Своевременное оповещение об обнаружении плагиата с тем, чтобы иметь возможность исправить ошибки;
- Государственный регулирующий орган
    - Возможность проверить оценки студентов в рамках ежегодной проверки.


# 3. Пользовательские истории

### Руководство Университета

Как Руководитель Университета
Я хочу, чтобы задания, которые  Преподаватели задают Студентам, проверялись автоматически с помощью Системы,
Для того, чтобы:
- повысить качество обучения программированию на начальном этапе
- снизить нагрузку Преподавателей
- повысить репутацию Университета

Как Руководитель Университета
Я хочу, чтобы баллы, которые Система проставляет решениям Студентов, автоматически попадали в Систему Управления Учебным  Процессом
Для того, чтобы не делать это вручную и не создавать лишнюю нагрузку на Преподавателей

Как Руководитель Университета
Я хочу, чтобы решения, проверенные Системой сохранялись в виде, удобном для предоставления Государственному Регулирующему Органу на аудит
Для того, чтобы:
- Выполнить требования регулятора;
- Не тратить время на ручной сбор статистики;

Как Руководитель Университета
Я хочу, чтобы задания, которые преподаватели назначают на студентов, не попадали в общественное пространство
Для того, чтобы сохранить ноу-хау преподавания студентам

Как Руководитель Университета
Я хочу, чтобы риск утечки персональных данных пользователей Системы был минимальным
Для того, чтобы сохранить репутацию Университета


### Преподаватель

Как Преподаватель
Я хочу, чтобы задания, которые  Я задаю Студентам, проверялись автоматически с помощью Системы,
Для того, чтобы:
- повысить качество обучения программированию на начальном этапе
- минимизировать рутинную работу

Как Преподаватель
Я хочу, чтобы задания, которые Я ввожу в Систему, могли быть назначены на Студента или Группу Студентов
Для того, чтобы:
- каждый Студент знал, какие задания ему необходимо выполнить.

Как Преподаватель
Я хочу иметь возможность вводить для каждой созданной мной Задачи Критерии Оценки
Для того, чтобы иметь возможность оценить успешность выполнения Студентом задания

Как Преподаватель
Я хочу иметь возможность указывать для каждой Задачи Конечную Дату
Для того, чтобы установить промежуток времени, за который успевающий студент должен сдать задачу;

Как Преподаватель
Я хочу иметь возможность видеть все предложенные Студентом Решения Задач
Для того, чтобы иметь возможность проследить прогресс навыков Студента

Как Преподаватель
Я хочу иметь возможность проверить решение студента на плагиат
Для того, чтобы не допустить получение недобросовестными студентами положительной оценки.

Как Преподаватель
Я хочу, чтобы баллы, которые Система назначила Решению Студента, корректно попадали в Систему Управления Учебным Процессом
Для того, чтобы:
- Выполнение Студентами заданий напрямую влияло на их успеваемость
- Минимизировать рутинную работу по переносу оценок из одной Системы в другую.


### Студент

Как Студент
Я хочу иметь возможность видеть назначенные на меня Задания
Для того, чтобы знать, какие задания мне необходимо выполнить

Как Студент
Я хочу иметь возможность загрузить своё решение в Систему
Для того, чтобы иметь возможность получить оценку

Как Студент
Я хочу иметь возможность повторно загрузить своё решение в Систему
Для того, чтобы иметь возможность повысить свою оценку

Как Студент
Я хочу иметь возможность видеть оценки, выставленные за выполнение мной решений
Для того, чтобы оценить, необходимо ли мне пересдавать текущее задание, или нет

Как Студент
Я хочу иметь возможность видеть статус проверки моего Решения на плагиат
Для того, чтобы оценить, необходимо ли мне пересдавать текущее задание или нет

Как Студент
Я хочу, чтобы Система автоматически обновляла Оценки, выставленные за мои решения в Системе Управления Рабочим Процессом
Для того, чтобы выполненные мной задания влияли на мою успеваемость.

### Государственный Регулирующий Орган

Как сотрудник Государственного Регулирующего Органа
Я хочу иметь возможность получать информацию из системы в удобном для аудита виде
Для того, чтобы:
- Упростить проведение аудита
- Получить более глубокие знания о квалификации Студентов


# 4. Атрибуты качества (и не функциональные требования)
* Проверяемость (возможность посмотреть и запустить проверку любого варианта решения студента)
* Ограниченный бюджет
* Безопасность (задания и решения студентов не должны быть общедоступны)


# 5. Контекстная схема системы

![Контекстная схема системы](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW1/%D0%94%D0%97%20-%201%20-%20%D0%9A%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%BD%D0%B0%D1%8F%20%D1%81%D1%85%D0%B5%D0%BC%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B.png)


# 6. Критические сценарии и критические атрибуты качества

- Преподаватель создаёт задание, определяет критерии приёмки и назначает задание студентам - задание становится доступным для решения студентами в течение 15 минут.
- Преподаватель проверяет код студентов - список вариантов студента должен появиться не более чем через 5 секунд. Отображение варианта студента зависит от объема решения.
- Студент сдаёт задание. Время функциональной проверки задания зависит от решения студента (накодил вечный цикл - зависнет). Время проверки на антиплагиат - внутри системы в течение 5 минут, в системе TurnItIn - зависит от параметров системы.
- Неавторизованный пользователь пытается загрузить задание или решения студента - система отклоняет запрос.
- Государственнй проверяющий орган получает данные для ежегодного аудита - данные по всем решениям студентов в течение года должны загрузиться не более чем за 2 часа.


# 7. Модели предметной области

![image - 1.2. - Модель предметной области - 1.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/image%20-%201.2.%20-%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C%20%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE%D0%B9%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B8%20-%201.png)

![image - 1.2. - Модель предметной области - 2.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/image%20-%201.2.%20-%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C%20%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE%D0%B9%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B8%20-%202.png)

![image - 1.2. - Модель предметной области - 3.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/image%20-%201.2.%20-%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C%20%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE%D0%B9%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B8%20-%203.png)

![image - 1.2. - Модель предметной области - 4.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/image%20-%201.2.%20-%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C%20%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE%D0%B9%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B8%20-%204.png)


# 8. Диаграмма контейнеров приложения

![ДЗ3 - 1 - Диаграмма контейнеров приложения.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW3/%D0%94%D0%973%20-%201%20-%20%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%BE%D0%B2%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F.png)

# 9. Декомпозиция слоя данных.

Все данные системы проверки задания по программированию хранятся в единственной БД системы.

# 10. Диаграмма развёртывания

![ДЗ3 - 2 - Диаграмма развёртывания.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW3/%D0%94%D0%973%20-%202%20-%20%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D1%80%D0%B0%D0%B7%D0%B2%D1%91%D1%80%D1%82%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.png)

# 11. Диаграмма последовательности

![ДЗ5.drawio.png](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW5/%D0%94%D0%975.drawio.png)

# 12. Оценка архитектурного решения

## Проектные характеристики

### Стоимость изменений

CAPEX = Стоимость разработки модулей + Стоимость настройки БД + Стоимость настройки брокера + Стоимость развёртывания модулей

OPEX = Стоимость поддержки

## Производительность

### Время ответа
Время ответа = t(путь запроса по сети) + t(аутентификация) + t(сохраниние в БД) + t(запись сообщения в брокер)

### Пропускная способность
Пропускная способность = N * пропускная_способность(Модуль исполнения кода)

## Модифицируемость

Оценка производилась в [2 - ADR - Модель данных](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/%D0%94%D0%97%20-%202%20-%20%D0%94%D0%B5%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20%D0%B8%20%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%20%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B.md)

## Отказоустойчивость.

- При отказе БД Системы API не сможет зарегистрировать новые решения студентов и обрабатывать повествования по зарегистрированным.
    - Необходимо предусмотреть мероприятия по сохранению бэкапов БД;
- При отказе модуля исполнения кода по-умолчанию проблем не возникнет - после перезапуска модуля он потребит все сообщения с заданиями из брокера.
    - В случае необходимости в реализации функционала повторной проверки решений необходимо учесть возможность отказа модуля запуска кода - при повторном запуске может быть создано слишком много ненужных заданий на проверку решений.   

Для своевременного обнаружения отаказов необходимо предусмотреть систему мониторинга и алертинга - есть вероятность, что Университет не сможет выделить круглосуточного дежурного администратора;

## Масштабируемость

### Сценарий роста нагрузки

Рост нагрузки может скзаться только на модуль "API приложения" - модули исполнения кода работают в режиме подписчиков, поэтому они масштабируются в сценарии "Увеличение объема"

Рост нагрузки предсказуем - в нужное время команда поддержки может добавить ресурс. 

Для реализации масштабирования модуля "API приложения" необходимо добавление балансировщика.

### Сценарий роста объема данных

Рост объема предсказуем - в нужное время команда разработки может поднять дополнительные инстансы исполнителей кода.

### Стоимость масштабирования

- При сценарии роста нагрузки - C(настройки инстанса "API приложения") + C(настройка балансировщика)
- При сценарии роста объема - C(настройки инстанса модуля "исполнителя кода")

# 13. ADL

 - [1 - ADR - Основные подходы к разработке](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW6/ADL/1%20-%20ADR%20-%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B9%20%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4%20%D0%BA%20%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B5.md)
 - [2 - ADR - Модель данных](https://github.com/IvanSenchukov/OTUS-SoftwareArchitect-2022/blob/master/HW2/%D0%94%D0%97%20-%202%20-%20%D0%94%D0%B5%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20%D0%B8%20%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%20%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B.md)